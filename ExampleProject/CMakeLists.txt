#Generated by VisualGDB project wizard.
#Note: VisualGDB will automatically update this file when you add new sources to the project.

# This project contains an executable unit test using googletest as well as an
# internal (non-exported) static and shared library.

cmake_minimum_required(VERSION 3.10)
project(ExampleProject)

option(EXAMPLEPROJECT_UNITTESTS "Enable Unit Tests" OFF)

set(LIBRARIES_FROM_REFERENCES ExampleProjectSharedLibrary ExampleProjectStaticLibrary)

# Executable
add_executable(ExampleProjectExecutable src/ExampleProjectExecutable.cpp)
target_compile_features(ExampleProjectExecutable PRIVATE cxx_std_11)
target_compile_options(ExampleProjectExecutable PRIVATE -Werror)
target_include_directories(ExampleProjectExecutable PRIVATE include/ExampleProject)
target_link_libraries(ExampleProjectExecutable "${LIBRARIES_FROM_REFERENCES}")

# Dynamic library
add_library(ExampleProjectSharedLibrary SHARED src/ExampleProjectSharedLibrary.cpp include/ExampleProject/ExampleProjectSharedLibrary.h src/PrivateHeader.h)
#target_compile_definitions(ExampleProjectSharedLibrary INTERFACE USING_CMAKE_LIBRARY_DEMO)
target_include_directories(ExampleProjectSharedLibrary
	PUBLIC
		$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include/ExampleProject>
		$<INSTALL_INTERFACE:include>
	PRIVATE
		${CMAKE_CURRENT_SOURCE_DIR}/src
)
#target_include_directories(ExampleProjectSharedLibrary PRIVATE include/ExampleProject src)
set_target_properties(ExampleProjectSharedLibrary PROPERTIES
	PUBLIC_HEADER include/ExampleProject/ExampleProjectSharedLibrary.h
	#PRIVATE_HEADER src/PrivateHeader.h
)

# Static Library
add_library(ExampleProjectStaticLibrary STATIC src/ExampleProjectStaticLibrary.cpp include/ExampleProject/ExampleProjectStaticLibrary.h)
target_include_directories(ExampleProjectStaticLibrary
	PUBLIC
		$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include/ExampleProject>
		$<INSTALL_INTERFACE:include>
	PRIVATE
		include/ExampleProject
)
set_target_properties(ExampleProjectStaticLibrary PROPERTIES
	PUBLIC_HEADER include/ExampleProject/ExampleProjectStaticLibrary.h
)

# Install and Export for use by downstream projects.
include(GNUInstallDirs)
install(TARGETS ExampleProjectSharedLibrary ExampleProjectStaticLibrary ExampleProjectExecutable
	EXPORT FindExampleProject
	PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/ExampleProject
	LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
	ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
	RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
)
install(EXPORT FindExampleProject
	NAMESPACE ExampleProject::
	DESTINATION ${CMAKE_INSTALL_LIBDIR}/cmake/ExampleProject
)

if(EXAMPLEPROJECT_UNITTEST)
	add_subdirectory(test)
endif()
